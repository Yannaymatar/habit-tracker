<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Habit Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white">
    <div id="app">
        <!-- Header -->
        <div class="bg-gradient-to-r from-gray-800 via-blue-800 to-purple-800 p-4 shadow-2xl">
            <div class="max-w-md mx-auto">
                <div class="text-center mb-4">
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">
                        Habit Tracker
                    </h1>
                </div>

                <!-- Date Navigation -->
                <div class="flex items-center justify-between mb-4">
                    <button onclick="goToPreviousDay()" class="p-3 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 shadow-lg">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15,18 9,12 15,6"></polyline>
                        </svg>
                    </button>
                    
                    <div class="text-center">
                        <div id="current-date" class="text-lg font-semibold text-white"></div>
                    </div>
                    
                    <button onclick="goToNextDay()" class="p-3 rounded-full bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 shadow-lg">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </button>
                </div>
                
                <!-- Today Button -->
                <button id="today-btn" onclick="goToToday()" class="w-full py-2 px-4 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 rounded-lg text-sm font-medium hidden shadow-lg">
                    Go to Today
                </button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="bg-gradient-to-r from-gray-800 via-blue-800 to-purple-800 border-t border-gray-700">
            <div class="max-w-md mx-auto flex">
                <button onclick="setActiveTab('habits')" id="habits-tab" class="flex-1 py-3 px-4 text-center font-medium">
                    <span>üè† Habits (<span id="habits-count">0</span>)</span>
                </button>
                <button onclick="setActiveTab('tasks')" id="tasks-tab" class="flex-1 py-3 px-4 text-center font-medium">
                    <span>üìã Tasks (<span id="tasks-count">0</span>)</span>
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="max-w-md mx-auto p-4">
            <!-- Habits Content -->
            <div id="habits-content">
                <div id="habits-list" class="space-y-4"></div>
                <div id="no-habits" class="text-center text-gray-400 py-12 hidden">
                    <div class="text-6xl mb-4">üéØ</div>
                    <div class="text-xl mb-2">No habits for today</div>
                    <div class="text-sm opacity-75">Add some habits to get started!</div>
                </div>
            </div>

            <!-- Tasks Content -->
            <div id="tasks-content" class="hidden">
                <div id="tasks-list" class="space-y-4"></div>
                <div id="no-tasks" class="text-center text-gray-400 py-12 hidden">
                    <div class="text-6xl mb-4">üìù</div>
                    <div class="text-xl mb-2">No tasks yet</div>
                    <div class="text-sm opacity-75">Add some tasks to stay organized!</div>
                </div>
            </div>
        </div>

        <!-- Add Button -->
        <button onclick="showAddForm()" class="fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 rounded-full flex items-center justify-center shadow-2xl">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>
    </div>

    <!-- Simple Add Form Modal -->
    <div id="add-form-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-gray-800 rounded-2xl max-w-lg w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 id="form-title" class="text-2xl font-bold text-white">Add Item</h2>
                <button onclick="closeAddForm()" class="p-2 hover:bg-gray-700 rounded-full">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <!-- Name -->
            <div class="mb-4">
                <label class="block text-sm font-medium mb-2 text-gray-300">Name</label>
                <input type="text" id="form-name" class="w-full p-3 rounded-xl bg-gray-700 border border-gray-600 focus:border-purple-500 focus:outline-none" placeholder="Enter name...">
            </div>

            <!-- Simple Day Selection for Habits -->
            <div id="habit-fields">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-300">Days</label>
                    <div class="grid grid-cols-7 gap-2">
                        <label class="text-center">
                            <input type="checkbox" id="day-sun" value="Sunday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Sun</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-mon" value="Monday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Mon</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-tue" value="Tuesday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Tue</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-wed" value="Wednesday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Wed</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-thu" value="Thursday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Thu</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-fri" value="Friday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Fri</div>
                        </label>
                        <label class="text-center">
                            <input type="checkbox" id="day-sat" value="Saturday">
                            <div class="p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600">Sat</div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Task fields -->
            <div id="task-fields" class="hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-300">Priority</label>
                    <select id="form-priority" class="w-full p-3 rounded-xl bg-gray-700 border border-gray-600 focus:border-purple-500 focus:outline-none">
                        <option value="high">üî¥ High</option>
                        <option value="medium">üü° Medium</option>
                        <option value="low">üîµ Low</option>
                    </select>
                </div>
            </div>

            <!-- Submit -->
            <div class="flex gap-3">
                <button onclick="closeAddForm()" class="flex-1 py-3 px-6 bg-gray-600 hover:bg-gray-700 rounded-xl font-medium">Cancel</button>
                <button onclick="submitForm()" id="submit-btn" class="flex-1 py-3 px-6 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-xl font-medium text-white">Add</button>
            </div>
        </div>
    </div>

    <script>
        // Simple global state
        let currentDate = new Date();
        let viewingDate = new Date();
        let habits = [];
        let tasks = [];
        let activeTab = 'habits';

        // Simple data structures
        class SimpleHabit {
            constructor(name, days) {
                this.id = Date.now() + Math.random();
                this.name = name;
                this.days = days; // Array of day names
                this.completions = {}; // {date: true/false}
            }
            
            isCompletedForDate(date) {
                const dateKey = date.toISOString().split('T')[0];
                return this.completions[dateKey] === true;
            }
            
            toggleCompletion(date) {
                const dateKey = date.toISOString().split('T')[0];
                this.completions[dateKey] = !this.completions[dateKey];
            }
        }

        class SimpleTask {
            constructor(name, priority = 'medium') {
                this.id = Date.now() + Math.random();
                this.name = name;
                this.priority = priority;
                this.isCompleted = false;
            }
            
            getPriorityColor() {
                switch(this.priority) {
                    case 'high': return 'from-red-500 to-red-600';
                    case 'medium': return 'from-yellow-500 to-yellow-600';
                    case 'low': return 'from-blue-500 to-blue-600';
                    default: return 'from-gray-500 to-gray-600';
                }
            }
        }

        // Utility functions
        const formatDate = (date) => {
            return date.toISOString().split('T')[0];
        };

        const addDays = (date, days) => {
            const result = new Date(date);
            result.setDate(result.getDate() + days);
            return result;
        };

        const formatDisplayDate = (date) => {
            const today = new Date();
            const diffDays = Math.round((date - today) / (1000 * 60 * 60 * 24));

            if (diffDays === 0) return 'Today';
            if (diffDays === -1) return 'Yesterday';
            if (diffDays === 1) return 'Tomorrow';

            return date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                month: 'short', 
                day: 'numeric' 
            });
        };

        const getWeekday = (date) => {
            return date.toLocaleDateString('en-US', { weekday: 'long' });
        };

        // Data management
        const saveData = () => {
            localStorage.setItem('simpleHabits', JSON.stringify(habits));
            localStorage.setItem('simpleTasks', JSON.stringify(tasks));
        };

        const loadData = () => {
            const savedHabits = localStorage.getItem('simpleHabits');
            const savedTasks = localStorage.getItem('simpleTasks');

            if (savedHabits) {
                const habitData = JSON.parse(savedHabits);
                habits = habitData.map(data => {
                    const habit = new SimpleHabit(data.name, data.days);
                    habit.id = data.id;
                    habit.completions = data.completions || {};
                    return habit;
                });
            }
            
            if (savedTasks) {
                const taskData = JSON.parse(savedTasks);
                tasks = taskData.map(data => {
                    const task = new SimpleTask(data.name, data.priority);
                    task.id = data.id;
                    task.isCompleted = data.isCompleted || false;
                    return task;
                });
            }
        };

        // Navigation
        const goToPreviousDay = () => {
            viewingDate = addDays(viewingDate, -1);
            updateDisplay();
        };

        const goToNextDay = () => {
            viewingDate = addDays(viewingDate, 1);
            updateDisplay();
        };

        const goToToday = () => {
            viewingDate = new Date();
            updateDisplay();
        };

        // Tab management
        const setActiveTab = (tab) => {
            activeTab = tab;
            
            // Update tab styling
            const habitsTab = document.getElementById('habits-tab');
            const tasksTab = document.getElementById('tasks-tab');
            
            if (tab === 'habits') {
                habitsTab.className = 'flex-1 py-3 px-4 text-center font-medium bg-purple-600 text-white rounded-lg mx-1';
                tasksTab.className = 'flex-1 py-3 px-4 text-center font-medium text-gray-400 hover:text-white';
                document.getElementById('habits-content').classList.remove('hidden');
                document.getElementById('tasks-content').classList.add('hidden');
            } else {
                tasksTab.className = 'flex-1 py-3 px-4 text-center font-medium bg-purple-600 text-white rounded-lg mx-1';
                habitsTab.className = 'flex-1 py-3 px-4 text-center font-medium text-gray-400 hover:text-white';
                document.getElementById('tasks-content').classList.remove('hidden');
                document.getElementById('habits-content').classList.add('hidden');
            }

            updateDisplay();
        };

        // Get today's habits
        const getTodaysHabits = () => {
            const weekday = getWeekday(viewingDate);
            return habits.filter(habit => habit.days.includes(weekday));
        };

        // Render functions
        const renderHabits = () => {
            const todaysHabits = getTodaysHabits();
            const habitsList = document.getElementById('habits-list');
            const noHabits = document.getElementById('no-habits');

            if (todaysHabits.length === 0) {
                habitsList.innerHTML = '';
                noHabits.classList.remove('hidden');
            } else {
                noHabits.classList.add('hidden');
                habitsList.innerHTML = todaysHabits.map(habit => renderHabitCard(habit)).join('');
            }

            document.getElementById('habits-count').textContent = todaysHabits.length;
        };

        const renderHabitCard = (habit) => {
            const isCompleted = habit.isCompletedForDate(viewingDate);
            const cardClass = isCompleted 
                ? 'p-4 rounded-xl bg-gradient-to-r from-green-500 to-teal-600 shadow-lg cursor-pointer'
                : 'p-4 rounded-xl bg-gradient-to-r from-gray-700 to-gray-800 shadow-lg cursor-pointer hover:from-gray-600 hover:to-gray-700';

            return `
                <div class="${cardClass}" onclick="toggleHabit(${habit.id})">
                    <div class="flex items-center justify-between">
                        <h3 class="font-bold text-lg text-white">${habit.name}</h3>
                        <div class="text-2xl">${isCompleted ? '‚úÖ' : '‚≠ï'}</div>
                    </div>
                    <div class="flex justify-center gap-1 mt-3">
                        ${habit.days.map(day => `
                            <div class="w-6 h-6 rounded-full text-xs flex items-center justify-center font-bold
                                     ${day === getWeekday(viewingDate) ? 'bg-white text-gray-800' : 'bg-gray-600 text-gray-300'}">
                                ${day.charAt(0)}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        };

        const renderTasks = () => {
            const tasksList = document.getElementById('tasks-list');
            const noTasks = document.getElementById('no-tasks');

            if (tasks.length === 0) {
                tasksList.innerHTML = '';
                noTasks.classList.remove('hidden');
            } else {
                noTasks.classList.add('hidden');
                const sortedTasks = [...tasks].sort((a, b) => {
                    if (a.isCompleted !== b.isCompleted) {
                        return a.isCompleted ? 1 : -1;
                    }
                    const priorityOrder = { high: 0, medium: 1, low: 2 };
                    return priorityOrder[a.priority] - priorityOrder[b.priority];
                });
                tasksList.innerHTML = sortedTasks.map(task => renderTaskCard(task)).join('');
            }

            document.getElementById('tasks-count').textContent = tasks.length;
        };

        const renderTaskCard = (task) => {
            const priorityLabels = {
                high: 'üî¥ High',
                medium: 'üü° Medium', 
                low: 'üîµ Low'
            };

            return `
                <div class="p-4 rounded-xl bg-gradient-to-r ${task.getPriorityColor()} ${task.isCompleted ? 'opacity-60' : ''} shadow-lg">
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="font-bold text-lg text-white ${task.isCompleted ? 'line-through' : ''}">${task.name}</h3>
                        <div class="px-2 py-1 bg-black bg-opacity-30 text-white rounded-full text-xs font-bold">
                            ${priorityLabels[task.priority]}
                        </div>
                    </div>
                    <button onclick="toggleTask(${task.id})" 
                            class="w-full py-2 px-4 rounded-lg font-bold transition-all
                                   ${task.isCompleted 
                                     ? 'bg-green-600 hover:bg-green-700 text-white' 
                                     : 'bg-white bg-opacity-20 hover:bg-opacity-30 text-white'
                                   }">
                        ${task.isCompleted ? '‚úÖ Completed' : 'Mark Complete'}
                    </button>
                </div>
            `;
        };

        // Interaction functions
        const toggleHabit = (habitId) => {
            const habit = habits.find(h => h.id === habitId);
            if (habit) {
                habit.toggleCompletion(viewingDate);
                saveData();
                updateDisplay();
            }
        };

        const toggleTask = (taskId) => {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.isCompleted = !task.isCompleted;
                saveData();
                updateDisplay();
            }
        };

        // Form handling
        const showAddForm = () => {
            document.getElementById('add-form-modal').classList.remove('hidden');
            document.getElementById('form-title').textContent = activeTab === 'habits' ? 'Add Habit' : 'Add Task';
            document.getElementById('submit-btn').textContent = activeTab === 'habits' ? 'Add Habit' : 'Add Task';
            
            // Clear form
            document.getElementById('form-name').value = '';
            
            // Show/hide fields based on tab
            if (activeTab === 'habits') {
                document.getElementById('habit-fields').style.display = 'block';
                document.getElementById('task-fields').style.display = 'none';
                // Uncheck all day checkboxes
                ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'].forEach(day => {
                    document.getElementById(`day-${day}`).checked = false;
                });
            } else {
                document.getElementById('habit-fields').style.display = 'none';
                document.getElementById('task-fields').style.display = 'block';
            }
        };

        const closeAddForm = () => {
            document.getElementById('add-form-modal').classList.add('hidden');
        };

        const submitForm = () => {
            const name = document.getElementById('form-name').value.trim();
            
            if (!name) {
                alert('Please enter a name');
                return;
            }

            if (activeTab === 'habits') {
                // Get selected days
                const selectedDays = [];
                ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'].forEach(day => {
                    const checkbox = document.getElementById(`day-${day}`);
                    if (checkbox.checked) {
                        selectedDays.push(checkbox.value);
                    }
                });
                
                if (selectedDays.length === 0) {
                    alert('Please select at least one day');
                    return;
                }

                const habit = new SimpleHabit(name, selectedDays);
                habits.push(habit);
            } else {
                const priority = document.getElementById('form-priority').value;
                const task = new SimpleTask(name, priority);
                tasks.push(task);
            }

            saveData();
            closeAddForm();
            updateDisplay();
        };

        // Main update function
        const updateDisplay = () => {
            // Update date display
            document.getElementById('current-date').textContent = formatDisplayDate(viewingDate);

            // Show/hide today button
            const todayBtn = document.getElementById('today-btn');
            if (formatDate(viewingDate) !== formatDate(new Date())) {
                todayBtn.classList.remove('hidden');
            } else {
                todayBtn.classList.add('hidden');
            }

            // Render content based on active tab
            if (activeTab === 'habits') {
                renderHabits();
            } else {
                renderTasks();
            }
        };

        // Initialize app
        loadData();
        updateDisplay();
        setActiveTab('habits');
    </script>
</body>
</html>
